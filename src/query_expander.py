# query_expander.py
from typing import Dict, List

class QueryExpander:
    """Расширитель запросов для улучшения поиска"""

    def __init__(self):
        # ключи — то, что реально встречается в запросах
        self.synonyms: Dict[str, List[str]] = {
            "номер счета": [
                "номер счета", "счет", "счёт", "расчетный счет",
                "банковский счет", "р/с", "расчетный счёт"
            ],
            "номер карты": [
                "номер карты", "карта", "банковская карта", "пластиковая карта"
            ],
            "кредитная карта": [
                "кредитная карта", "кредитной карте", "кредитки",
                "кредитка", "карта кредитная"
            ],
            "дебетовая карта": [
                "дебетовая карта", "дебетовой карте", "дебетовая",
                "карта дебетовая"
            ],
            "пин код": [
                "пин код", "pin-код", "pin код", "pin", "пин", "код карты"
            ],
            "смс": [
                "смс", "sms", "смс уведомления", "смс-уведомления",
                "смс оповещения", "sms-уведомления", "смс информирование"
            ],
            "смс код": [
                "смс код", "код из смс", "код подтверждения",
                "одноразовый код", "проверочный код", "sms-код"
            ],
            "альфа чек": [
                "альфа чек", "альфачек", "услуга альфа чек",
                "смс информирование", "смс уведомления", "смс оповещения"
            ],
        }

    def expand_query(self, query: str) -> str:
        original_query = query.lower()
        expanded_terms = [original_query]

        for term, synonyms in self.synonyms.items():
            if term in original_query:
                expanded_terms.extend(synonyms)

        unique_terms = list(dict.fromkeys(expanded_terms))
        return " ".join(unique_terms)



